CREATE SCHEMA PROJ_CINEMAS;
GO

CREATE TABLE PROJ_CINEMAS.UTILIZADOR(
	id			int,
	email		nvarchar(50),	
	pw			nvarchar(50),
	username	nvarchar(50),
	
	CONSTRAINT PK_UTILIZADOR PRIMARY KEY(id)
)

--Ver a parte da password do utilizador
DROP TABLE PROJ_CINEMAS.UTILIZADOR;

INSERT INTO PROJ_CINEMAS.UTILIZADOR VALUES (4, 'rogerio@gmail.com', 'r12345', 'rogerio10');
INSERT INTO PROJ_CINEMAS.UTILIZADOR VALUES (16, 'tomas@gmail.com', 't6969', 'tomas7');
INSERT INTO PROJ_CINEMAS.UTILIZADOR VALUES (54, 'joao@gmail.com', 'joao2004', 'jonhy7');
INSERT INTO PROJ_CINEMAS.UTILIZADOR VALUES (21, 'mariana@gmail.com', 'mary2001', 'mariana1');
INSERT INTO PROJ_CINEMAS.UTILIZADOR VALUES (69, 'nuno@gmail.com', 'nunoST', 'NunoAd');
INSERT INTO PROJ_CINEMAS.UTILIZADOR VALUES (41, 'pedro10@gmail.com', 'pedroTavares', 'Pedro14');


CREATE TABLE PROJ_CINEMAS.CLIENTE(
	id_cliente		int,
	idade			int,	
	num_CC			int,
	telefone		int,
	
	CONSTRAINT PK_CLIENTE PRIMARY KEY(id_cliente),
	CONSTRAINT FK_CLIENTE FOREIGN KEY(id_cliente) REFERENCES PROJ_CINEMAS.UTILIZADOR(id)
)

INSERT INTO PROJ_CINEMAS.CLIENTE VALUES (4, 53, 30467844, 925888833);
INSERT INTO PROJ_CINEMAS.CLIENTE VALUES (16, 17, 30777844, 925439120);
INSERT INTO PROJ_CINEMAS.CLIENTE VALUES (54, 21, 20555864, 935444433);
INSERT INTO PROJ_CINEMAS.CLIENTE VALUES (21, 26, 20400324, 926376109);


CREATE TABLE PROJ_CINEMAS.ADMINISTRADOR(
	id_admin			int,
	num_funcionario		int,	
	id_cinema			int,
	
	CONSTRAINT PK_ADMINISTRADOR PRIMARY KEY(id_admin),
	CONSTRAINT FK1_ADMINISTRADOR FOREIGN KEY(id_admin) REFERENCES PROJ_CINEMAS.UTILIZADOR(id),
	CONSTRAINT FK2_ADMINISTRADOR FOREIGN KEY(id_cinema) REFERENCES PROJ_CINEMAS.CINEMA(id)
)

INSERT INTO PROJ_CINEMAS.ADMINISTRADOR VALUES (69, 202041, 410);
INSERT INTO PROJ_CINEMAS.ADMINISTRADOR VALUES (41, 101030, 130);

CREATE TABLE PROJ_CINEMAS.CINEMA(
	id		int,
	nome	nvarchar(50),	
	
	CONSTRAINT PK_CINEMA PRIMARY KEY(id),
)

INSERT INTO PROJ_CINEMAS.CINEMA VALUES (410, 'Cinemas NOS Palácio do Gelo');
INSERT INTO PROJ_CINEMAS.CINEMA VALUES (206, 'Cinemas NOS Forum Viseu');
INSERT INTO PROJ_CINEMAS.CINEMA VALUES (130, 'Cinemas NOS Oeiras Parque');
INSERT INTO PROJ_CINEMAS.CINEMA VALUES (314, 'Cinemas NOS Norte Shopping');
INSERT INTO PROJ_CINEMAS.CINEMA VALUES (360, 'Cinemas NOS Arrábida Shopping');
INSERT INTO PROJ_CINEMAS.CINEMA VALUES (387, 'Cinemas NOS Mar Shopping');




drop table PROJ_CINEMAS.SALACINEMA;

CREATE TABLE PROJ_CINEMAS.BILHETE(

		id int,
		id_clienteBILHETE int,
		id_sessaoBILHETE int,

CONSTRAINT PK_BILHETE PRIMARY KEY(id),
CONSTRAINT FK1_BILHETE FOREIGN KEY(id_clienteBILHETE) REFERENCES PROJ_CINEMAS.CLIENTE(id_cliente),
CONSTRAINT FK2_BILHETE FOREIGN KEY(id_sessaoBILHETE) REFERENCES PROJ_CINEMAS.SESSAO(id),

)


INSERT INTO PROJ_CINEMAS.BILHETE VALUES (9, 4, 2);
INSERT INTO PROJ_CINEMAS.BILHETE VALUES (10, 16, 4);
INSERT INTO PROJ_CINEMAS.BILHETE VALUES (11, 16, 4);
INSERT INTO PROJ_CINEMAS.BILHETE VALUES (12, 54, 6);
INSERT INTO PROJ_CINEMAS.BILHETE VALUES (13, 21, 8);


CREATE TABLE PROJ_CINEMAS.SESSAO(

		id int,
		dataa datetime,
		id_filmeSESSAO int,
		id_salaSESSAO int,

CONSTRAINT PK_SESSAO PRIMARY KEY(id),
CONSTRAINT FK1_SESSAO FOREIGN KEY(id_filmeSESSAO) REFERENCES PROJ_CINEMAS.FILME(id),
CONSTRAINT FK2_SESSAO FOREIGN KEY(id_salaSESSAO) REFERENCES PROJ_CINEMAS.SALACINEMA(id),

)


INSERT INTO PROJ_CINEMAS.SESSAO VALUES (2, '2022-04-13 14:30:00', 20, 30);
INSERT INTO PROJ_CINEMAS.SESSAO VALUES (4, '2022-02-12 16:30:00', 21, 31);
INSERT INTO PROJ_CINEMAS.SESSAO VALUES (6, '2022-05-25 22:30:00', 22, 32);
INSERT INTO PROJ_CINEMAS.SESSAO VALUES (8, '2022-02-17 19:30:00', 23, 33);



CREATE TABLE PROJ_CINEMAS.FILME(

		id int, 
		foto nvarchar(50),  -- LINK DA FOTO
		titulo nvarchar(50),
		realizador nvarchar(50),
		sinopse nvarchar(200),
		elenco nvarchar(200),

CONSTRAINT PK_FILME PRIMARY KEY(id),

)

INSERT INTO PROJ_CINEMAS.FILME VALUES (20, 'avengers.jpg', 'Vingadores', 'Joe Russo','Homem de Ferro, formam o time dos sonhos de Fury','Robert Downey Jr, Scarlett Johansson, Chris Evans');
INSERT INTO PROJ_CINEMAS.FILME VALUES (21, 'homem.png', 'Homem-Aranha: Sem Volta a Casa', 'Jon Watts','O Homem-Aranha precisa lidar com as consequências ', 'Tom Holland ,Andrew Garfield, Zendaya');
INSERT INTO PROJ_CINEMAS.FILME VALUES (22, 'uncharted.jpg', 'Uncharted', 'Ruben Fleischer','Nathan Drake e seu parceiro canastrão Victor "Sully" Sullivan ','Tom Holland ,Mark Wahlberg');
INSERT INTO PROJ_CINEMAS.FILME VALUES (23, 'man.jpg', 'Man of Steel', 'Zack Snyder','Jor-El e sua mulher procuram preservar a raça enviando o filho recém-nascido para a Terra', 'Henry Cavill ,Amy Adams, Kevin Costner');


CREATE TABLE PROJ_CINEMAS.CONTEM(

		id_filmeCONTEM int,
		id_categoriasCONTEM int,

CONSTRAINT PKS_CONTEM PRIMARY KEY(id_filmeCONTEM,id_categoriasCONTEM),

CONSTRAINT FK1_CONTEM FOREIGN KEY(id_filmeCONTEM) REFERENCES PROJ_CINEMAS.FILME(id),
CONSTRAINT FK2_CONTEM FOREIGN KEY(id_categoriasCONTEM) REFERENCES PROJ_CINEMAS.CATEGORIAS(id),

)

INSERT INTO PROJ_CINEMAS.CONTEM VALUES (20, 70);
INSERT INTO PROJ_CINEMAS.CONTEM VALUES (21, 71);
INSERT INTO PROJ_CINEMAS.CONTEM VALUES (22, 72);
INSERT INTO PROJ_CINEMAS.CONTEM VALUES (23, 73);


CREATE TABLE PROJ_CINEMAS.CATEGORIAS(

		id int,
		nomeCATEGORIAS nvarchar(50),

CONSTRAINT PK_CATEGORIASS PRIMARY KEY(id),

)

INSERT INTO PROJ_CINEMAS.CATEGORIAS VALUES (70, 'terror');
INSERT INTO PROJ_CINEMAS.CATEGORIAS VALUES (71, 'comedia');
INSERT INTO PROJ_CINEMAS.CATEGORIAS VALUES (72, 'Aventura');
INSERT INTO PROJ_CINEMAS.CATEGORIAS VALUES (73, 'Mistério');

CREATE TABLE PROJ_CINEMAS.SALACINEMA(

		id int,
		lotacao int,
		num_sala int,
		num_seats int,
		id_cinemaSALACINEMA int,

CONSTRAINT PK_SALACINEMA PRIMARY KEY(id),
CONSTRAINT FK_SALACINEMA FOREIGN KEY(id_cinemaSALACINEMA) REFERENCES PROJ_CINEMAS.CINEMA(id),

)

INSERT INTO PROJ_CINEMAS.SALACINEMA VALUES (30, 10, 5, 45, 410);
INSERT INTO PROJ_CINEMAS.SALACINEMA VALUES (31, 20, 6, 50, 206);
INSERT INTO PROJ_CINEMAS.SALACINEMA VALUES (32, 45, 7, 45, 360);
INSERT INTO PROJ_CINEMAS.SALACINEMA VALUES (33, 22, 8, 50, 387);

